# 翻訳品質評価基準

## 概要

このドキュメントは、Claude CLI翻訳の品質を客観的に測定するための評価基準を定義します。翻訳品質は5つのカテゴリーで評価され、合計100点満点で採点されます。

**目標スコア**: 80/100以上

**評価対象**: 技術文書（APIドキュメント、エラーメッセージ、技術ブログ記事、コードコメント）の翻訳

## 評価カテゴリー

| カテゴリー | 配点 | 重要度 |
|-----------|------|--------|
| 1. 専門用語の正確性 | 30点 | 最高 |
| 2. 文脈理解と一貫性 | 25点 | 高 |
| 3. 自然な表現 | 25点 | 高 |
| 4. 構造とフォーマットの保持 | 10点 | 中 |
| 5. 技術的正確性 | 10点 | 中 |
| **合計** | **100点** | - |

---

## 1. 専門用語の正確性（30点）

### 評価観点

技術文書における専門用語（プログラミング用語、技術用語、ツール名等）が正確に翻訳されているかを評価します。

### 満点基準（30点）

- [ ] プログラミング言語のキーワード（`function`, `class`, `interface`等）が適切に翻訳または保持されている
- [ ] 専門用語辞書に従った訳語が使用されている（例: `repository` → `リポジトリ`、`commit` → `コミット`）
- [ ] プログラミング言語名（React、TypeScript、Rust等）、クラウドサービス名（GitHub、Docker、Kubernetes等）が原文のまま保持されている
- [ ] 技術用語の訳語が文書全体で一貫している（例: `cache`を「キャッシュ」と訳した場合、文書全体で「キャッシュ」を使用）
- [ ] 訳語が不明な専門用語は原文を括弧付きで併記している（例: `インターフェース (interface)`）

### 減点基準

| 減点項目 | 減点幅 | 例 |
|---------|-------|---|
| プログラミング言語名を誤訳 | -5点/1件 | `React` を「反応」と訳す |
| 専門用語辞書の訳語と異なる | -3点/1件 | `function` を「機能」ではなく「関数」と訳すべき |
| 技術用語の訳語が不一致 | -3点/1件 | `cache`を「キャッシュ」と「キャッシ」で混在 |
| APIエンドポイントやHTTPメソッドを翻訳 | -5点/1件 | `GET /users` を「ユーザーを取得」と訳す |
| 訳語不明の専門用語を括弧付き併記していない | -2点/1件 | 原文のみで日本語訳を提供しない |

### 採点例

**原文（英語）**:
```
The React framework uses hooks like useState and useEffect to manage component state.
```

**良い翻訳（30点）**:
```
Reactフレームワークは、useStateやuseEffectのようなフック (hooks) を使用して、コンポーネントの状態を管理します。
```
- `React`: 原文のまま保持 ✓
- `framework`: 「フレームワーク」に統一 ✓
- `hooks`: 原文を併記 ✓
- `useState`, `useEffect`: 原文のまま保持 ✓
- `component`: 「コンポーネント」に統一 ✓

**悪い翻訳（15点）**:
```
リアクトのフレイムワークは、useStateやuseEffectのようなフックスを使ってコンポーネント状態を管理します。
```
- `React`: 「リアクト」と訳す（-5点）
- `framework`: 「フレイムワーク」とカタカナ表記が不統一（-3点）
- `hooks`: 「フックス」と誤訳（-3点）
- 原文併記なし（-4点）

---

## 2. 文脈理解と一貫性（25点）

### 評価観点

文脈を考慮し、代名詞や接続詞が適切に翻訳されているか、文間の論理的なつながりが保持されているかを評価します。

### 満点基準（25点）

- [ ] 代名詞（`it`, `this`, `that`等）が前後の文脈に基づいて適切に翻訳されている
- [ ] 接続詞（`however`, `therefore`, `moreover`等）が文間の論理関係を正確に反映している
- [ ] 複数文からなるテキストで、文間の論理的なつながりが保持されている
- [ ] 同一概念に対する訳語が文書全体で一貫している
- [ ] 箇条書きやリスト構造で、各項目の翻訳の一貫性が保たれている

### 減点基準

| 減点項目 | 減点幅 | 例 |
|---------|-------|---|
| 代名詞の参照先が不明確 | -5点/1件 | `it`を「それ」と訳したが、参照先が明確でない |
| 接続詞の論理関係が不適切 | -4点/1件 | `however`を「しかし」ではなく「そして」と訳す |
| 文間の論理的なつながりが失われている | -5点/1件 | 前の文の結論が次の文の前提になっていない |
| 同一概念の訳語が不一致 | -3点/1件 | `authentication`を「認証」と「オーセンティケーション」で混在 |
| リスト項目の訳語の一貫性が欠如 | -3点/1件 | 箇条書きで「～する」と「～している」が混在 |

### 採点例

**原文（英語）**:
```
The API requires authentication. It uses JWT tokens for secure communication. This approach ensures that only authorized users can access the data.
```

**良い翻訳（25点）**:
```
APIは認証が必要です。安全な通信のためにJWTトークンを使用します。このアプローチにより、認可されたユーザーのみがデータにアクセスできることを保証します。
```
- `It` → 「（APIは）」と文脈から省略 ✓
- `This approach` → 「このアプローチ」と明確に参照 ✓
- `authentication` → 「認証」に統一 ✓
- 論理的なつながりが保持されている ✓

**悪い翻訳（12点）**:
```
そのAPIは認証が必要です。JWTトークンを使用して安全に通信します。しかし、認可されたユーザーだけがデータにアクセス可能です。
```
- `The API` → 「そのAPI」と不自然（-3点）
- `It` → 主語が明確でない（-5点）
- `This approach ensures` → 「しかし」と逆接で訳す（論理関係が不適切）（-5点）

---

## 3. 自然な表現（25点）

### 評価観点

翻訳結果が対象言語のネイティブスピーカーにとって自然で読みやすいかを評価します。

### 満点基準（25点）

- [ ] 翻訳結果が対象言語のネイティブスピーカーにとって自然に感じる
- [ ] 英語→日本語では「です・ます調」が適切に使用されている（技術文書の標準）
- [ ] 日本語→英語では能動態と受動態が適切に使い分けられている
- [ ] 冗長な表現や不自然な直訳が避けられている
- [ ] 簡潔で明瞭な表現が使用されている
- [ ] 適切な丁寧度（丁寧語、敬語）が保持されている

### 減点基準

| 減点項目 | 減点幅 | 例 |
|---------|-------|---|
| 不自然な直訳 | -5点/1件 | `make sure` を「確かにする」と訳す（「確認する」が自然） |
| 冗長な表現 | -3点/1件 | 「～することが可能です」を多用（「～できます」が簡潔） |
| 文体の不統一（です・ます調とだ・である調の混在） | -4点/1件 | 「APIは認証が必要だ。トークンを使用します。」 |
| 能動態/受動態の不適切な使用（日→英） | -3点/1件 | `The user creates a post` を `A post is created by the user` と訳す |
| 丁寧度が不適切 | -3点/1件 | 丁寧な文脈で「だ・である調」を使用 |
| 読みにくい複雑な文構造 | -4点/1件 | 1文が50単語以上で、複数の従属節を含む |

### 採点例

**原文（英語）**:
```
Please make sure to check the API documentation before implementing the feature.
```

**良い翻訳（25点）**:
```
機能を実装する前に、APIドキュメントを確認してください。
```
- `Please make sure to check` → 「確認してください」と簡潔 ✓
- 「です・ます調」で統一 ✓
- 自然で読みやすい ✓

**悪い翻訳（13点）**:
```
その機能を実装することの前に、そのAPIのドキュメンテーションをチェックすることを確かにしてください。
```
- `Please make sure` → 「確かにする」と不自然（-5点）
- `check` → 「チェックする」と英語のまま（-3点）
- 冗長な表現（「することの前に」「することを」）（-4点）

---

## 4. 構造とフォーマットの保持（10点）

### 評価観点

コードブロック、箇条書き、APIエンドポイント等の構造とフォーマットが正しく保持されているかを評価します。

### 満点基準（10点）

- [ ] コードブロック（バッククォート3つで囲まれた部分）が翻訳されず、原文のまま保持されている
- [ ] 箇条書きやリスト構造が正しく保持されている
- [ ] APIエンドポイント（例: `/api/users/:id`）が翻訳されず、原文のまま保持されている
- [ ] HTTPメソッド（GET、POST、PUT、DELETE等）が翻訳されず、原文のまま保持されている
- [ ] ファイルパス、コマンドライン引数が翻訳されず、原文のまま保持されている

### 減点基準

| 減点項目 | 減点幅 | 例 |
|---------|-------|---|
| コードブロックを翻訳 | -5点/1件 | \`\`\`python を「パイソン」と訳す |
| APIエンドポイントを翻訳 | -3点/1件 | `/users/:id` を `/ユーザー/:id` と訳す |
| HTTPメソッドを翻訳 | -2点/1件 | `GET` を「取得」と訳す |
| 箇条書き構造を崩す | -3点/1件 | リスト形式を段落形式に変更 |
| ファイルパスを翻訳 | -2点/1件 | `/src/components` を `/ソース/コンポーネント` と訳す |

### 採点例

**原文（英語）**:
```
To fetch user data, send a GET request to `/api/users/:id`. Example:
```python
response = requests.get('/api/users/123')
```
```

**良い翻訳（10点）**:
```
ユーザーデータを取得するには、`/api/users/:id`にGETリクエストを送信します。例:
```python
response = requests.get('/api/users/123')
```
```
- APIエンドポイント保持 ✓
- HTTPメソッド保持 ✓
- コードブロック保持 ✓

**悪い翻訳（2点）**:
```
ユーザーデータを取得するには、`/api/ユーザー/:id`に取得リクエストを送信します。例:
```パイソン
レスポンス = requests.get('/api/ユーザー/123')
```
```
- APIエンドポイントを翻訳（-3点）
- HTTPメソッドを翻訳（-2点）
- コードブロックを翻訳（-3点）

---

## 5. 技術的正確性（10点）

### 評価観点

翻訳結果が技術的に正確で、原文の意味が損なわれていないかを評価します。

### 満点基準（10点）

- [ ] 原文の技術的な意味が正確に翻訳されている
- [ ] 重要な情報が欠落していない
- [ ] 不要な情報が追加されていない
- [ ] 技術的な誤訳がない
- [ ] 原文の意図とニュアンスが正確に反映されている

### 減点基準

| 減点項目 | 減点幅 | 例 |
|---------|-------|---|
| 重要な情報の欠落 | -5点/1件 | セキュリティ警告の一部を省略 |
| 不要な情報の追加 | -3点/1件 | 原文にない説明を追加 |
| 技術的な誤訳 | -5点/1件 | `asynchronous` を「同期的」と訳す（正しくは「非同期的」） |
| 意図やニュアンスの不一致 | -3点/1件 | 警告文を推奨文として訳す |
| 否定/肯定の逆転 | -5点/1件 | `This is not recommended` を「これは推奨されます」と訳す |

### 採点例

**原文（英語）**:
```
Warning: This API endpoint is deprecated and will be removed in version 2.0. Please migrate to the new endpoint.
```

**良い翻訳（10点）**:
```
警告: このAPIエンドポイントは非推奨であり、バージョン2.0で削除されます。新しいエンドポイントに移行してください。
```
- 「警告」の意図が保持されている ✓
- 技術的な意味が正確 ✓
- 重要な情報が欠落していない ✓

**悪い翻訳（2点）**:
```
注意: このAPIは古いため、バージョン2.0では使えなくなる可能性があります。
```
- `Warning` → 「注意」と軽く訳す（意図が不一致）（-3点）
- `deprecated` → 「古い」と技術的に不正確（-5点）
- 「新しいエンドポイントに移行してください」の情報が欠落（-5点、ただし最大減点は10点）

---

## 評価サンプル

### サンプル1: APIドキュメント翻訳（英語→日本語）

**原文**:
```
The `createUser` function accepts a user object and returns a Promise. If the user already exists, it throws an error. Example usage:
```javascript
const user = await createUser({ name: 'John', email: 'john@example.com' });
```
```

**翻訳結果**:
```
`createUser`関数は、ユーザーオブジェクトを受け取り、Promiseを返します。ユーザーがすでに存在する場合、エラーをスローします。使用例:
```javascript
const user = await createUser({ name: 'John', email: 'john@example.com' });
```
```

**評価**:

| カテゴリー | スコア | 理由 |
|-----------|-------|------|
| 専門用語の正確性 | 30/30 | `createUser`, `Promise`, コードブロック内の英語を保持 ✓ |
| 文脈理解と一貫性 | 25/25 | 文間の論理的なつながりが保持されている ✓ |
| 自然な表現 | 25/25 | 「です・ます調」で統一、自然な日本語 ✓ |
| 構造とフォーマットの保持 | 10/10 | コードブロック保持、関数名保持 ✓ |
| 技術的正確性 | 10/10 | 技術的な意味が正確、情報の欠落なし ✓ |
| **合計** | **100/100** | **満点** |

---

### サンプル2: エラーメッセージ翻訳（英語→日本語）

**原文**:
```
Error: Connection timeout. The server did not respond within 30 seconds. Please check your network connection and try again.
```

**翻訳結果**:
```
エラー: 接続がタイムアウトしました。サーバーが30秒以内に応答しませんでした。ネットワーク接続を確認して、再試行してください。
```

**評価**:

| カテゴリー | スコア | 理由 |
|-----------|-------|------|
| 専門用語の正確性 | 28/30 | `timeout`を「タイムアウト」と訳す（-2点: 原文併記が望ましい） |
| 文脈理解と一貫性 | 25/25 | 文間の論理的なつながりが保持されている ✓ |
| 自然な表現 | 25/25 | 「です・ます調」で統一、エラーメッセージとして自然 ✓ |
| 構造とフォーマットの保持 | 10/10 | フォーマット保持 ✓ |
| 技術的正確性 | 10/10 | 技術的な意味が正確 ✓ |
| **合計** | **98/100** | **高品質** |

---

### サンプル3: 技術ブログ記事翻訳（英語→日本語）

**原文**:
```
React 18 introduced automatic batching, which improves performance by grouping multiple state updates into a single re-render. This feature works seamlessly with hooks like useState and useReducer.
```

**翻訳結果**:
```
React 18では、自動バッチング (automatic batching) が導入されました。これは、複数の状態更新を1回の再レンダリングにまとめることで、パフォーマンスを向上させます。この機能は、useStateやuseReducerのようなフックとシームレスに連携します。
```

**評価**:

| カテゴリー | スコア | 理由 |
|-----------|-------|------|
| 専門用語の正確性 | 30/30 | `React 18`, `automatic batching` (原文併記), `hooks`, `useState`, `useReducer`を適切に処理 ✓ |
| 文脈理解と一貫性 | 25/25 | `This feature`が「自動バッチング」を指すことが明確 ✓ |
| 自然な表現 | 23/25 | 「です・ます調」で統一、やや直訳的（-2点: 「まとめることで」→「まとめ」がより簡潔） |
| 構造とフォーマットの保持 | 10/10 | フォーマット保持 ✓ |
| 技術的正確性 | 10/10 | 技術的な意味が正確 ✓ |
| **合計** | **98/100** | **高品質** |

---

## 目標スコア80/100以上の根拠

### なぜ80点が目標なのか

技術文書の翻訳において、80/100以上のスコアは**実用レベルの品質**を示します。以下の理由から、80点を目標として設定しています：

#### 1. **実務での許容範囲**
- 80点以上の翻訳は、開発者が技術ドキュメントを理解し、実装に活用できるレベルです。
- 多少の不自然さや訳語の不統一があっても、技術的な意味が正確であれば実務に支障はありません。

#### 2. **各カテゴリーのバランス**
80点を達成するためには、以下のようなバランスが必要です：

| カテゴリー | 目標スコア | 許容される減点 |
|-----------|----------|--------------|
| 専門用語の正確性（30点） | 27-30点 | -0～3点 |
| 文脈理解と一貫性（25点） | 22-25点 | -0～3点 |
| 自然な表現（25点） | 20-25点 | -0～5点 |
| 構造とフォーマットの保持（10点） | 9-10点 | -0～1点 |
| 技術的正確性（10点） | 10点 | -0点 |
| **合計** | **80-100点** | **-0～20点** |

#### 3. **最重要項目の保証**
- **専門用語の正確性（30点）**: 技術文書では専門用語が最も重要です。27点以上を維持することで、開発者が混乱せずに文書を理解できます。
- **技術的正確性（10点）**: 技術的な誤訳は致命的です。満点を目指し、減点を許容しません。

#### 4. **自然な表現の柔軟性**
- 自然な表現（25点）では、-0～5点の減点を許容します。
- 多少の直訳や冗長な表現があっても、技術的な意味が正確であれば実務に支障はありません。

#### 5. **改善の余地**
- 80点は実用レベルですが、90点以上を目指すことで、より洗練された翻訳を実現できます。
- 継続的な改善により、専門用語辞書の拡充やプロンプトの最適化を進めます。

### 現状（50点）から80点への改善

| カテゴリー | 現状（推定） | 目標 | 改善幅 |
|-----------|-------------|------|-------|
| 専門用語の正確性 | 15/30点 | 27-30点 | +12-15点 |
| 文脈理解と一貫性 | 12/25点 | 22-25点 | +10-13点 |
| 自然な表現 | 12/25点 | 20-25点 | +8-13点 |
| 構造とフォーマットの保持 | 6/10点 | 9-10点 | +3-4点 |
| 技術的正確性 | 5/10点 | 10点 | +5点 |
| **合計** | **50/100点** | **80-100点** | **+30-50点** |

### まとめ

80/100点は、技術文書の翻訳において**実用レベルの品質**を示す現実的な目標です。この目標を達成することで、開発者が技術ドキュメントを正確に理解し、実装に活用できる翻訳を提供できます。

---

## 評価プロセス

### 評価手順

1. **テストケースの準備**: 30サンプル（APIドキュメント10、エラーメッセージ5、技術ブログ記事10、コードコメント5）
2. **翻訳実行**: 最適化されたシステムプロンプトで各テストケースを翻訳
3. **採点**: 5つのカテゴリーで評価し、スコアを算出
4. **平均スコア算出**: 30サンプルの平均スコアを算出
5. **目標達成確認**: 平均スコアが80/100以上であることを確認

### 評価者

- **自動評価**: ユニットテストで基本的な構造チェック（コードブロック保持、APIエンドポイント保持等）
- **手動評価**: 人間のレビュアーが自然な表現、文脈理解、技術的正確性を評価

### 評価の再現性

- 評価基準と減点項目は明確に定義されており、異なる評価者でも一貫した評価が可能です。
- 評価結果はJSON形式で保存し、トレーサビリティを確保します。

---

## 参考資料

- Requirements Document (`.kiro/specs/translation-quality-improvement/requirements.md`)
- Design Document (`.kiro/specs/translation-quality-improvement/design.md`)
- 専門用語辞書 (`docs/technical-terminology-dictionary.md`)
- システムプロンプト構造説明 (`docs/claude-cli-system-prompt-structure.md`)
