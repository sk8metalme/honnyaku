---
name: /michi:e2e-plan
description: E2Eファースト方式でタスク分割を計画する
---

# E2Eプランニング

このコマンドは、E2Eファースト方式でタスク分割を計画し、早期に動作確認可能な実装計画を策定します。

## サブエージェント呼び出し

**重要**: このコマンドは `e2e-first-planner` サブエージェントを使用します。

e2e-first-planner サブエージェントを使用して、E2Eファースト方式でタスク分割を計画してください。

## 計画方針

### 1. ミニマム動作確認可能な単位を最優先
- 最小構成での動作確認
- 早期フィードバックの獲得
- リスクの早期発見
- 段階的な機能拡張

### 2. E2Eテスト可能なマイルストーンを設定
- ユーザーストーリーベースのマイルストーン
- 各マイルストーンでE2Eテストを実施
- 統合テストを早期に開始
- 継続的なデプロイ可能性の維持

### 3. 結合テストを早期に実施
- コンポーネント間の連携確認
- API統合の早期テスト
- データフローの検証
- 外部サービス連携の確認

## E2Eファースト開発の原則

### Walking Skeleton（歩く骨格）アプローチ
1. **最小限の機能実装**: 画面からDBまで一連の流れを実装
2. **デプロイパイプライン構築**: CI/CD環境を最初に整備
3. **段階的拡張**: 機能を少しずつ追加していく

### タスク分割の優先順位

| 優先度 | タスクタイプ | 理由 |
|--------|-------------|------|
| **最優先** | E2E動作確認 | 全体の動作を早期確認 |
| **高** | 統合ポイント | 連携部分のリスク高 |
| **中** | 個別機能 | 独立して実装可能 |
| **低** | UI改善・最適化 | 動作確認後に実施 |

## 計画に含める項目

### 1. マイルストーン定義
```markdown
## Milestone 1: 基本フロー（E2E）
- [ ] ユーザー登録画面
- [ ] 認証API
- [ ] DBスキーマ
- [ ] E2Eテスト: 新規ユーザー登録

## Milestone 2: コア機能（E2E）
- [ ] ダッシュボード画面
- [ ] データ取得API
- [ ] データ表示機能
- [ ] E2Eテスト: ログイン→ダッシュボード表示
```

### 2. 依存関係の明示
- 前提条件となるタスク
- 並行実行可能なタスク
- ブロッカーとなる技術的課題

### 3. テスト戦略
- E2Eテストシナリオ
- 統合テストポイント
- テストデータの準備

## 参照スキル

スキル `e2e-first-planning` のガイドラインに従ってタスク分割を実施してください。

## 使用例

```
/michi:e2e-plan
```

コマンド実行後、機能要件を分析し、E2Eファースト方式のタスク分割計画を作成します。

## 入力情報

- .kiro/specs/{{FEATURE_NAME}}/requirements.md
- .kiro/specs/{{FEATURE_NAME}}/design.md

## 出力

E2Eプランニング結果は以下の形式で出力されます：

1. **Walking Skeletonの定義**: 最小限の動作確認範囲
2. **マイルストーン一覧**: E2Eテスト可能な単位
3. **タスクリスト**: 優先順位付きタスク
4. **依存関係図**: タスク間の依存関係
5. **推定工数**: 各タスクの概算工数

## Phase 0.5統合

このコマンドはPhase 0.5（タスク分割）で実行することを推奨します。
`/kiro:spec-tasks` コマンドから呼び出すことも可能です。

## 言語設定

出力言語は .kiro/project.json の設定に従います。
